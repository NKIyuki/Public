<h1>注文履歴詳細</h1>

<h1>購入者</h1>
<%= @order.name%>
<h1>注文日</h1>
<%= @order.created_at %>
<h1>配送先</h1>
<%= @order.postal_code %>
<%= @order.address %>
<%= @order.name%>
<h1>支払い方法</h1>
<%= @order.payment_method_i18n %>

<h1>注文ステータス</h1>
<%= form_with model: @order,url: admin_order_path(@order.id) do |f| %>
  <%= f.select :order_status, {'入金待ち': 'waiting_for_payment','入金確認':'payment_confirmation','制作中':'under_construction','発送準備中':'preparing_for_shipment','発送済み':'sent'} %>
  <%= f.submit '更新',class:"btn btn-success" %>
<% end %>

<% @order.order_details.each do |order_detail| %>
  <h1>商品名</h1>
  <%= order_detail.item.name %>
  <h1>単価（税込）</h1>
  <%= order_detail.price %>
  <h1>数量</h1>
  <%= order_detail.amount %>
  <h1>小計</h1>
  <%= order_detail.price * order_detail.amount %>

  <h1>制作ステータス</h1>
  <%= form_with model: order_detail, url: admin_order_detail_path(order_detail.id) do |f| %>
    <%= f.select :making_status ,{'制作不可':'production_not_allowed','製作待ち':'waiting_for_production','制作中':'under_construction','制作完了':'production_completed'} %>
    <%= f.submit '更新',class:"btn btn-success" %>
  <% end %>
<% end %>


